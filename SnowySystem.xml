<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Script file="SnowySystem.lua"/>
  <Include file="Config.lua"/>
  <Frame name="SS_Small_Menu" parent="UIParent" toplevel="true" enableMouse="true">
    <Scripts>
      <OnLoad>
        SS_ApplicationLoad();
      </OnLoad>
      <OnEnter>
        self:SetPoint("LEFT", -12, 0);
      </OnEnter>
      <OnLeave>
        self:SetPoint("LEFT", -64, 0);
      </OnLeave>
    </Scripts>
    <Size>
      <AbsDimension x="84" y="84" />
    </Size>
    <Anchors>
      <Anchor point="LEFT">
        <Offset><AbsDimension x="-64" y="0"/></Offset>
      </Anchor>
    </Anchors>
    <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
      <BackgroundInsets>
        <AbsInset left="8" right="8" top="8" bottom="8"/>
      </BackgroundInsets>
      <TileSize>
        <AbsValue val="32"/>
      </TileSize>
      <EdgeSize>
        <AbsValue val="32"/>
      </EdgeSize>
    </Backdrop>
    <Frames>
      <Button name="$parent_SettingsIcon" text="Close">
        <Scripts>
          <OnEnter>
            SS_Small_Menu:SetPoint("LEFT", -12, 0);
            GameTooltip:SetOwner(this, "CENTER")
            GameTooltip:AddLine("Управление")
            GameTooltip:Show()
          </OnEnter>
          <OnLeave>
            SS_Small_Menu:SetPoint("LEFT", -64, 0);
            GameTooltip:Hide()
          </OnLeave>
          <OnClick>
            if (SS_Controll_Menu:IsVisible()) then
              SS_Controll_Menu:Hide();
            else
              SS_Controll_Menu:Show();
            end;
          </OnClick>
        </Scripts>
        <Anchors>
          <Anchor point="CENTER" />
        </Anchors>
        <Size>
          <AbsDimension x="32" y="32" />
        </Size>
        <NormalTexture file = "Interface\AddOns\SnowySystem\IMG\settings_normal" />
        <HighlightTexture file = "Interface\AddOns\SnowySystem\IMG\settings_hover" />
      </Button>
    </Frames>
  </Frame>
  <Frame name="SS_Controll_Menu" hidden="true">
    <Size><AbsDimension x="500" y="250"/></Size>
    <Anchors>
      <Anchor point="LEFT" relativeTo="SS_Small_Menu">
      <Offset><AbsDimension x="57" y="0"/></Offset>
      </Anchor>
    </Anchors>
    <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
      <BackgroundInsets>
        <AbsInset left="8" right="8" top="8" bottom="8"/>
      </BackgroundInsets>
      <TileSize>
        <AbsValue val="32"/>
      </TileSize>
      <EdgeSize>
        <AbsValue val="32"/>
      </EdgeSize>
    </Backdrop>
    <Layers>
      <Layer>
        <FontString name="$parent_Title" font="Fonts\FRIZQT__.TTF" text="Управление">
          <Color r="1" g="0.8" b="1" a="1"/>
          <FontHeight val="14"/>
          <Anchors>
            <Anchor point="TOP" relativeTo="$parent" x="0" y="-20" />
          </Anchors>
        </FontString>
      </Layer>
      <Layer>
        <FontString name="$parent_SettingsTitle" font="Fonts\FRIZQT__.TTF" text="Настройки">
          <Color r="1" g="0.8" b="1" a="1"/>
          <FontHeight val="12"/>
          <Anchors>
            <Anchor point="TOPLEFT" relativeTo="$parent" x="20" y="-48" />
          </Anchors>
        </FontString>
        <FontString name="$parent_PlotsTitle" font="Fonts\FRIZQT__.TTF" text="Сюжеты">
          <Color r="1" g="0.8" b="1" a="1"/>
          <FontHeight val="12"/>
          <Anchors>
            <Anchor point="TOP" relativeTo="$parent" x="-18" y="-48" />
          </Anchors>
        </FontString>
      </Layer>
      <Layer>
        <FontString name="$parent_Settings_DiceInfo" font="Fonts\FRIZQT__.TTF" text="Информация о броске">
          <Color r="1" g="0.8" b="1" a="1"/>
          <FontHeight val="11"/>
          <Anchors>
            <Anchor point="TOPLEFT" relativeTo="$parent" x="40" y="-76" />
          </Anchors>
        </FontString>
        <FontString name="$parent_Settings_Invites" font="Fonts\FRIZQT__.TTF" text="Принимать приглашения">
          <Color r="1" g="0.8" b="1" a="1"/>
          <FontHeight val="11"/>
          <Anchors>
            <Anchor point="TOPLEFT" relativeTo="$parent" x="40" y="-106" />
          </Anchors>
        </FontString>
        <FontString name="$parent_Settings_PlotType" font="Fonts\FRIZQT__.TTF" text="Участник">
          <Color r="1" g="0.8" b="1" a="1"/>
          <FontHeight val="11"/>
          <Anchors>
            <Anchor point="TOPRIGHT" relativeTo="$parent" x="-50" y="-48" />
          </Anchors>
        </FontString>
      </Layer>
    </Layers>
    <Frames>
      <CheckButton name="$parent_Settings_DiceCheck" inherits="OptionsCheckButtonTemplate" checked="true">
        <Anchors>
          <Anchor point="TOPLEFT">
            <Offset>
              <AbsDimension x="14" y="-70"></AbsDimension>
            </Offset>
          </Anchor>
        </Anchors>
      </CheckButton>
      <CheckButton name="$parent_Settings_InvitesCheck" inherits="OptionsCheckButtonTemplate" checked="true">
        <Anchors>
          <Anchor point="TOPLEFT">
            <Offset>
              <AbsDimension x="14" y="-100"></AbsDimension>
            </Offset>
          </Anchor>
        </Anchors>
      </CheckButton>
      <Button name="$parent_Settings_PlotTypeNext" inherits="OptionsButtonTemplate" text="+">
        <Size x = "20" y = "20" />
        <Anchors>
          <Anchor point="TOPRIGHT">
            <Offset x="-20" y="-43"/>
          </Anchor> 
        </Anchors>
        <Scripts>
          <OnClick>
            if (SS_Controll_Menu_Settings_PlotType:GetText() == "Участник") then
              SS_Controll_Menu_Settings_PlotType:SetText("Ведущий");
              SS_Controll_Menu_Settings_Create_New_Plot:Show();
            else
              SS_Controll_Menu_Settings_PlotType:SetText("Участник");
              SS_Controll_Menu_Settings_Create_New_Plot:Hide();
            end;
          </OnClick>
        </Scripts>
      </Button>
      <Button name="$parent_Settings_Create_New_Plot" hidden="true" inherits="OptionsButtonTemplate" text="Создать">
        <Anchors>
          <Anchor point="BOTTOMRIGHT">
            <Offset x="-20" y="24"/>
          </Anchor> 
        </Anchors>
        <Scripts>
          <OnClick>
            self:GetParent():Hide();
            SS_Create_Menu:Show();
          </OnClick>
        </Scripts>
      </Button>
    </Frames>
  </Frame>
  <Frame name="SS_Create_Menu" parent = "UIParent" hidden="true" movable="true">
    <Scripts>
      <OnLoad>self:RegisterForDrag("LeftButton");</OnLoad>
      <OnDragStart>self:StartMoving();</OnDragStart>
      <OnDragStop>self:StopMovingOrSizing();</OnDragStop>
    </Scripts>
    <Size><AbsDimension x="300" y="164"/></Size>
    <Anchors>
      <Anchor point="CENTER" />
    </Anchors>
    <Backdrop bgFile="Interface\AddOns\SnowySystem\IMG\create-menu-background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
      <BackgroundInsets>
        <AbsInset left="8" right="8" top="8" bottom="8"/>
      </BackgroundInsets>
      <TileSize>
        <AbsValue val="300"/>
      </TileSize>
      <EdgeSize>
        <AbsValue val="32"/>
      </EdgeSize>
    </Backdrop>
    <Layers>
      <Layer>
        <FontString name="$parent_Title" font="Fonts\FRIZQT__.TTF" text="Новый сюжет">
          <Color r="1" g="0.8" b="1" a="1"/>
          <FontHeight val="14"/>
          <Anchors>
            <Anchor point="TOP" relativeTo="$parent" x="0" y="-20" />
          </Anchors>
          <Shadow>
            <Offset x="-1" y="-1" />
            <Color r="0" g="0" b="0"/>
          </Shadow>
        </FontString>
        <FontString name="$parent_Name_Input_Title" font="Fonts\FRIZQT__.TTF" text="Название:">
          <Color r="1" g="0.8" b="1" a="1"/>
          <FontHeight val="11"/>
          <Anchors>
            <Anchor point="LEFT" relativeTo="$parent" x="52" y="36" />
          </Anchors>
          <Shadow>
            <Offset x="-1" y="-1" />
            <Color r="0" g="0" b="0"/>
          </Shadow>
        </FontString>
      </Layer>
    </Layers>
    <Frames>
      <Button name="$parent_Close_Button" inherits="OptionsButtonTemplate" text="x">
        <Size x = "20" y = "20" />
        <Anchors>
          <Anchor point="TOPRIGHT">
            <Offset x="-20" y="-20"/>
          </Anchor> 
        </Anchors>
        <Scripts>
          <OnClick>
            self:GetParent():Hide()
          </OnClick>
        </Scripts>
      </Button>
      <EditBox name="$parent_Name_Input" letters="36" autoFocus="false">
        <Size x="200" y="36" />
        <Anchors>
          <Anchor point="CENTER">
            <Offset><AbsDimension x="0" y="8"/></Offset>
          </Anchor>
        </Anchors>
        <TextInsets top="4" bottom="4" left="8" right="8" />
        <Backdrop bgFile="Interface\DialogFrame\UI-DialogBox-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
          <EdgeSize>
            <AbsValue val="12"/>
          </EdgeSize>
        </Backdrop>
        <FontString inherits="ChatFontNormal" />
      </EditBox>
      <Button name="$parent_Close_Button" inherits="OptionsButtonTemplate" text="Создать">
        <Size x = "140" y = "36" />
        <Anchors>
          <Anchor point="BOTTOM">
            <Offset x="0" y="20"/>
          </Anchor>
        </Anchors>
        <Scripts>
          <OnClick>
            SS_createPlot(SS_Create_Menu_Name_Input:GetText(), UnitName("player"));
            self:GetParent():Hide();
          </OnClick>
        </Scripts>
      </Button>
    </Frames>
  </Frame>
</Ui>